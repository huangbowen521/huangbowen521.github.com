<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ç¼–ç¨‹å¼€å‘ | é»„åšæ–‡çš„åœ°ç›˜]]></title>
  <link href="http://www.huangbowen.net/blog/categories/ç¼–ç¨‹å¼€å‘/atom.xml" rel="self"/>
  <link href="http://www.huangbowen.net/"/>
  <updated>2013-10-17T14:08:22+08:00</updated>
  <id>http://www.huangbowen.net/</id>
  <author>
    <name><![CDATA[é»„åšæ–‡]]></name>
    <email><![CDATA[huangbowen521@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[å‡çº§rubyç‰ˆæœ¬é‚£"ä¸å ªå›é¦–çš„ç»å†"]]></title>
    <link href="http://www.huangbowen.net/blog/2013/09/23/not-easy-to-install-ruby/"/>
    <updated>2013-09-23T13:53:00+08:00</updated>
    <id>http://www.huangbowen.net/blog/2013/09/23/not-easy-to-install-ruby</id>
    <content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´åœ¨ç©Chef-ä¸€ä¸ªITåŸºç¡€è®¾æ–½è‡ªåŠ¨åŒ–å·¥å…·ã€‚ç”±äºChefæ˜¯ç”±Rubyå†™çš„ä¸€ä¸ªgemï¼Œé‚£ä¹ˆå°±éœ€è¦å®‰è£…Rubyã€‚å½“ç„¶Rubyæˆ‘æ—©å°±å®‰è£…äº†ï¼Œå¹¶ä¸”ä½¿ç”¨rvmæ¥ç®¡ç†RubyåŠGemã€‚æœ¬æ¥ä¸€åˆ‡çœ‹ä¼¼æ­£å¸¸ï¼Œä½†æ˜¯ä¸ä¼šé¢„æ–™åé¢ä¼šé‡åˆ°é‚£ä¹ˆå¤šçš„å‘ã€‚</p>

<!-- more -->


<p>Chefæœ¬åœ°çš„repoåŒ…ä¸­æœ‰ä¸€ä¸ªvagrantè™šæ‹Ÿæœºçš„æ¨¡æ¿æ–‡ä»¶ï¼Œé€šè¿‡å®ƒå¯ä»¥setupä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç„¶åä½¿ç”¨Chefæ¥æ“ä½œè¿™ä¸ªèŠ‚ç‚¹ã€‚é‚£ä¹ˆå°±ä½¿ç”¨vagrantå‘½ä»¤æ¥setupè¿™ä¸ªè™šæ‹ŸæœºæŠŠã€‚</p>

<p>```bash</p>

<p>$ vagrant up --no-color
Vagrant failed to initialize at a very early stage:</p>

<p>It appears that you've ran a newer version of Vagrant on this
computer. Unfortunately, newer versions of Vagrant change internal
directory layouts that cause older versions to break. This version
of Vagrant cannot properly run.</p>

<p>If you'd like to start from a clean state, please remove the
Vagrant state directory: /Users/twer/.vagrant.d</p>

<p>Warning that this will remove all your boxes and potentially corrupt
existing Vagrant environments that were running based on the future
version.</p>

<p>```</p>

<p>consoleä¸­è¯´Vagrantç‰ˆæœ¬æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå°±æŒ‰è¯´æ˜åˆ é™¤.vagrant.dæ–‡ä»¶å¤¹æŠŠã€‚</p>

<p>```bash</p>

<p>$ rm -rf ~/.vagrant.d/
$ vagrant up --no-color
/Users/twer/sourcecode/chef-repo/Vagrantfile:8:in <code>&lt;top (required)&gt;': undefined method</code>configure' for Vagrant:Module (NoMethodError)</p>

<pre><code> from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in `load'
 from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in `block in procs_for_source'
 from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config.rb:41:in `block in capture_configures'
</code></pre>

<p>```</p>

<p>çªé‡Œä¸ªå»ï¼Œåˆå‡ºæ–°é—®é¢˜äº†ã€‚é‚£å¥½å§ï¼Œçœ‹çœ‹å½“å‰rubyçš„ç‰ˆæœ¬ã€‚</p>

<p>```bash</p>

<p>$ rvm list</p>

<p>rvm rubies</p>

<p>   ruby-1.9.2-p320 [ x86_64 ]
=* ruby-1.9.3-p194 [ x86_64 ]</p>

<h1>=> - current</h1>

<h1>=* - current &amp;&amp; default</h1>

<h1>* - default</h1>

<p>```</p>

<p>è¯•ç€å°†Rubyçš„ç‰ˆæœ¬åˆ‡æ¢åˆ°1.9.2-p320å†è¯•è¯•ã€‚</p>

<p>```bash</p>

<p>$ rvm use ruby-1.9.2-p320
Using /usr/local/rvm/gems/ruby-1.9.2-p320
$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] Setting the name of the VM...
[default] Clearing any previously set forwarded ports...
[default] Creating shared folders metadata...
[default] Clearing any previously set network interfaces...
[default] Preparing network interfaces based on configuration...
[default] Forwarding ports...
[default] -- 22 => 2222 (adapter 1)
[default] Booting VM...
[default] Waiting for VM to boot. This can take a few minutes.
[default] VM booted and ready for use!
[default] Setting hostname...
[default] Mounting shared folders...
[default] -- /vagrant</p>

<p>```
æå®šã€‚çœ‹æ¥é—®é¢˜æ˜¯å½“å‰ä½¿ç”¨çš„rubyçš„ç‰ˆæœ¬æœ‰é—®é¢˜ã€‚</p>

<p>è€æ˜¯ä½¿ç”¨æ—§ç‰ˆæœ¬ä¹Ÿä¸æ˜¯ä¸ªäº‹ï¼ŒæŠŠRubyå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çœ‹è¿˜æœ‰è¿™ä¸ªé—®é¢˜ä¸ã€‚</p>

<p>```bash</p>

<p>$ rvm list known</p>

<h1>MRI Rubies</h1>

<p>[ruby-]1.8.6[-p420]
[ruby-]1.8.7[-p374]
[ruby-]1.9.1[-p431]
[ruby-]1.9.2[-p320]
[ruby-]1.9.3[-p448]
[ruby-]2.0.0-p195
[ruby-]2.0.0[-p247]
[ruby-]2.0.0-head
ruby-head</p>

<p>```</p>

<p>çœ‹æ¥rubyçš„1.9.3å·²ç»æœ‰p448äº†ï¼Œé‚£ä¹ˆå°±å‡çº§åˆ°p448ã€‚</p>

<p>```bash</p>

<p>$ rvm install 1.9.3
Checking requirements for osx.
Installing requirements for osx.
Updating system.
Installing required packages: libksba, openssl..........
Error running 'requirements_osx_brew_libs_install gcc libksba openssl',
please read /usr/local/rvm/log/1379843991_ruby-1.9.3-p448/package_install_gcc_libksba_openssl.log
Requirements installation failed with status: 1.</p>

<p>```</p>

<p>å‡çº§å¤±è´¥ï¼Œé‚£ä¹ˆçœ‹çœ‹logã€‚</p>

<p>```bash</p>

<p>==> make bootstrap
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make[2]: <strong><em> [configure-stage1-target-libgcc] Error 1
make[1]: </em></strong> [stage1-bubble] Error 2
make: *** [bootstrap] Error 2</p>

<p>READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting</p>

<p>There were package installation errors, make sure to read the log.</p>

<p>Try <code>brew tap --repair</code> and make sure <code>brew doctor</code> looks reasonable.</p>

<p>```</p>

<p>é€šè¿‡çœ‹logæ˜¯gccç¼–è¯‘å¤±è´¥ï¼Œå¹¶ä¸”é€šè¿‡logå¯ä»¥çœ‹å‡ºrvmæ˜¯é€šè¿‡homebrewæ¥å®‰è£…å¿…å¤‡æ–‡ä»¶çš„ã€‚</p>

<p>é€šè¿‡ä¸€ç•ªæŸ¥èµ„æ–™åï¼Œæ‰¾åˆ°äº†è§£å†³åŠæ³•ã€‚é‚£å°±æ˜¯å°†Xcodeå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œç„¶ååœ¨Preferenceé‡Œé€‰æ‹©Downloadsæ ‡ç­¾ï¼Œç„¶åå®‰è£…Command Line Toolsã€‚</p>

<p><img src="/images/developerTools.png" width="600"></p>

<p>å®‰è£…å®Œæ¯•åå†ç”¨Homebrewå®‰è£…gcc49ã€‚</p>

<p>```bash</p>

<p>$ brew install gcc49
==> Downloading ftp://gcc.gnu.org/pub/gcc/snapshots/4.9-20130915/gcc-4.9-20130915.tar.bz2
Already downloaded: /Library/Caches/Homebrew/gcc49-4.9-20130915.tar.bz2
==> ../configure --build=x86_64-apple-darwin12.5.0 --prefix=/usr/local/Cellar/gcc49/4.9-20130915/gcc
==> make bootstrap
==> make install
==> Caveats
This is a snapshot of GCC trunk, which is in active development and
supposed to have bugs and should not be used in production
environment.
==> Summary
ğŸº  /usr/local/Cellar/gcc49/4.9-20130915: 977 files, 93M, built in 21.6 minutes</p>

<p>```</p>

<p>æˆåŠŸå®‰è£…GCCã€‚</p>

<p>ç»§ç»­å›åˆ°å®‰è£…Rubyçš„ä»»åŠ¡ä¸Šæ¥ã€‚ç”±äºåœ¨å®‰è£…Rubyå‰ä¼šå…ˆå®‰è£…å¿…å¤‡æ–‡ä»¶ï¼Œé‚£ä¹ˆå¹²è„†ç›´æ¥å…ˆå®‰è£…å¿…å¤‡æ–‡ä»¶çš„äº†ã€‚</p>

<p>```bash</p>

<p>$ rvm requirements
Checking requirements for osx.
Installing requirements for osx.
mkdir: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448: Permission denied
tee: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448/update_system.log: No such file or directory
tee: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448/update_system.log: No such file or directory</p>

<p>```</p>

<p>æˆ‘å‹’ä¸ªå»ï¼Œè²Œä¼¼æ˜¯æƒé™é—®é¢˜ï¼Œé‚£ä¹ˆç”¨sudoè§£å†³ã€‚</p>

<p>```bash</p>

<p>$ sudo rvm requirements</p>

<p>Checking requirements for osx.
Installing requirements for osx.
Updating system.
Installing required packages: libksba, openssl..........
Error running 'requirements_osx_brew_libs_install libksba openssl',
please read /usr/local/rvm/log/1379843991_ruby-1.9.3-p448/package_install_libksba_openssl.log
Requirements installation failed with status: 1.</p>

<p>```</p>

<p>åˆå¤±è´¥ï¼Œçœ‹çœ‹é”™è¯¯æ—¥å¿—å§ã€‚</p>

<p>```bash</p>

<p>current path: /Users/twer
command(3): requirements_osx_brew_libs_install libksba openssl
Error: No such keg: /usr/local/Cellar/libksba
Error: Cowardly refusing to <code>sudo brew install</code>
You can use brew with sudo, but only if the brew executable is owned by root.
However, this is both not recommended and completely unsupported so do so at
your own risk.
There were package installation errors, make sure to read the log.</p>

<p>Try <code>brew tap --repair</code> and make sure <code>brew doctor</code> looks reasonable.</p>

<p>```</p>

<p>çœ‹äº†æ—¥å¿—è²Œä¼¼æ˜ç™½äº†ï¼Œä½¿ç”¨brewå®‰è£…libksbaç”±äºåŠ äº†sudoæ‰€ä»¥å‡ºé—®é¢˜äº†ã€‚é‚£ä¹ˆç›´æ¥åœ¨å‘½ä»¤è¡Œä½¿ç”¨sudoè¯•è¯•ã€‚</p>

<p>```bash</p>

<p>$ sudo brew install libksba
Error: Cowardly refusing to <code>sudo brew install</code>
You can use brew with sudo, but only if the brew executable is owned by root.
However, this is both not recommended and completely unsupported so do so at
your own risk.</p>

<p>```</p>

<p>çªé‡Œä¸ªå»ï¼Œä¸ä½¿ç”¨sudoå§rvm requirementsæ‰§è¡Œä¸æˆåŠŸã€‚åŠ ä¸Šsudoå§rvm requirementsè°ƒç”¨çš„brew installåˆä¸è¡Œã€‚å¥½å§ï¼Œå°±æŒ‰ä¸Šé¢è¯´çš„å°†brewè½¬æ¢åˆ°rootæ¨¡å¼ã€‚</p>

<p>```bash</p>

<p>ls -al /usr/local/bin/brew
-rwxr-xr-x  1 twer  admin  703 Mar 14  2013 /usr/local/bin/brew
$ sudo chown root:admin /usr/local/bin/brew
Password:
$ ls -al /usr/local/bin/brew
-rwxr-xr-x  1 root  admin  703 Mar 14  2013 /usr/local/bin/brew</p>

<p>```</p>

<p>OKã€‚å†æ‰§è¡Œå§ã€‚</p>

<p>```bash</p>

<p>$ sudo rvm requirements
Password:
Checking requirements for osx.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Requirements installation successful.</p>

<p>```</p>

<p>æå®šã€‚æŠŠbrewå†åˆ‡æ¢åˆ°åŸæ¥çš„ç”¨æˆ·å’Œç»„ã€‚</p>

<p>```bash</p>

<p>$ sudo chown twer:admin /usr/local/bin/brew</p>

<p>```</p>

<p>ç»•äº†ä¸€å¤§åœˆäº†ç»ˆäºå¯ä»¥å®‰è£…Rubyäº†ã€‚</p>

<p>```bash</p>

<p>$ rvm install 1.9.3
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p448.
Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.
Checking requirements for osx.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Requirements installation successful.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a while depending on your cpu(s)...
ruby-1.9.3-p448 - #downloading ruby-1.9.3-p448, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</p>

<pre><code>                             Dload  Upload   Total   Spent    Left  Speed
</code></pre>

<p>  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0Warning: Failed to create the file ruby-1.9.3-p448.tar.bz2: Permission denied
  0 9816k    0   745    0     0    320      0  8:43:34  0:00:02  8:43:32  2623
curl: (23) Failed writing body (0 != 745)
There was an error(23).
Checking fallback: http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p448.tar.bz2
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</p>

<pre><code>                             Dload  Upload   Total   Spent    Left  Speed
</code></pre>

<p>  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Warning: Failed to create the file ruby-1.9.3-p448.tar.bz2: Permission denied
  0 9816k    0  3329    0     0   4578      0  0:36:35 --:--:--  0:36:35  8853
curl: (23) Failed writing body (0 != 3329)
There was an error(23).
Failed download
There has been an error fetching the ruby interpreter. Halting the installation.</p>

<p>```</p>

<p>åˆæœ‰é”™ã€‚èµ°åˆ°è¿™æ­¥ä¸Šäº†ï¼Œç»§ç»­è§£å†³å§ã€‚ç»è¿‡åˆ†æè²Œä¼¼æ˜¯ä¸‹è½½æ–‡ä»¶æœ‰é—®é¢˜ï¼Œå¯èƒ½åˆæ˜¯æƒé™é—®é¢˜ã€‚</p>

<p>```bash</p>

<p>sudo rvm install 1.9.3
Password:
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p448.
Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.
Checking requirements for osx.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Requirements installation successful.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a while depending on your cpu(s)...
ruby-1.9.3-p448 - #downloading ruby-1.9.3-p448, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</p>

<pre><code>                             Dload  Upload   Total   Spent    Left  Speed
</code></pre>

<p>100 9816k  100 9816k    0     0   422k      0  0:00:23  0:00:23 --:--:--  154k
ruby-1.9.3-p448 - #extracting ruby-1.9.3-p448 to /usr/local/rvm/src/ruby-1.9.3-p448
ruby-1.9.3-p448 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p448
ruby-1.9.3-p448 - #configuring...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-1.9.3-p448 - #post-configuration
ruby-1.9.3-p448 - #compiling...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-1.9.3-p448 - #installing.........................................................................................................
curl: (35) Unknown SSL protocol error in connection to rubygems.org:443
There was an error while trying to resolve rubygems version for 'latest'.
Halting the installation.</p>

<p>```</p>

<p>å‰é¢é‚£ä¸ªé”™æ²¡äº†ï¼Œä½†æ˜¯æ–°æ¥äº†ä¸€ä¸ªé”™ã€‚è²Œä¼¼æ˜¯sshåˆ°rubygems.orgç½‘ç«™æœ‰é—®é¢˜ï¼Œçªç„¶æƒ³èµ·åœ¨rvm requirementsæ—¶å®‰è£…äº†opensslï¼Œåº”è¯¥æ˜¯sslè®¾ç½®çš„é—®é¢˜ã€‚ä»ç½‘ä¸ŠæŸ¥äº†ä¸‹ï¼Œè²Œä¼¼è¦é‡ç½®macportã€‚
```bash</p>

<p>$ sudo rm -rf /opt/local</p>

<p>$ sudo rm -rf $rvm_path/usr
$ sudo rm -rf $rvm_path/bin/port
sudo: cannot get working directory
$ sudo rvm autolibs homebrew</p>

<p>```</p>

<p>æœ€åï¼Œå†é‡æ–°å®‰è£…Rubyã€‚</p>

<p>```bash</p>

<p>$ sudo rvm reinstall 1.9.3
Removing /usr/local/rvm/src/ruby-1.9.3-p448...
Removing /usr/local/rvm/rubies/ruby-1.9.3-p448...
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.8/x86_64/ruby-1.9.3-p448.
Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.
Checking requirements for osx_brew.
Certificates in '/usr/local/etc/openssl/cert.pem' already are up to date.
Requirements installation successful.
Installing Ruby from source to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a while depending on your cpu(s)...
ruby-1.9.3-p448 - #downloading ruby-1.9.3-p448, this may take a while depending on your connection...
ruby-1.9.3-p448 - #extracting ruby-1.9.3-p448 to /usr/local/rvm/src/ruby-1.9.3-p448
ruby-1.9.3-p448 - #extracted to /usr/local/rvm/src/ruby-1.9.3-p448
ruby-1.9.3-p448 - #configuring...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-1.9.3-p448 - #post-configuration
ruby-1.9.3-p448 - #compiling...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
ruby-1.9.3-p448 - #installing.........................................................................................................
Retrieving rubygems-2.1.4
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</p>

<pre><code>                             Dload  Upload   Total   Spent    Left  Speed
</code></pre>

<p>100  356k  100  356k    0     0  11672      0  0:00:31  0:00:31 --:--:-- 20611
Extracting rubygems-2.1.4 ...
Removing old Rubygems files...
$LANG was empty, setting up LANG=en_US, if it fails again try setting LANG to something sane and try again.
Installing rubygems-2.1.4 for ruby-1.9.3-p448............................................................................................................................................
Installation of rubygems completed successfully.
Saving wrappers to '/usr/local/rvm/wrappers/ruby-1.9.3-p448'........</p>

<p>ruby-1.9.3-p448 - #adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p448 - #importing default gemsets, this may take time.......................
Install of ruby-1.9.3-p448 - #complete
Making gemset ruby-1.9.3-p448 pristine....
Making gemset ruby-1.9.3-p448@global pristine....</p>

<p>```</p>

<p>ç»ˆäºå®‰è£…ä¸Šäº†ã€‚</p>

<p>```bash</p>

<p>$ rvm list</p>

<p>rvm rubies</p>

<p>   ruby-1.9.2-p320 [ x86_64 ]
 * ruby-1.9.3-p194 [ x86_64 ]
=> ruby-1.9.3-p448 [ x86_64 ]</p>

<h1>=> - current</h1>

<h1>=* - current &amp;&amp; default</h1>

<h1>* - default</h1>

<p>$ rvm use ruby-1.9.3-p448
$ rvm list</p>

<p>rvm rubies</p>

<p>   ruby-1.9.2-p320 [ x86_64 ]
 * ruby-1.9.3-p194 [ x86_64 ]
=> ruby-1.9.3-p448 [ x86_64 ]</p>

<h1>=> - current</h1>

<h1>=* - current &amp;&amp; default</h1>

<h1>* - default</h1>

<p>$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
[default] VirtualBox VM is already running.</p>

<p>```</p>

<p>ç»ˆäºå°†Rubyå‡çº§åˆ°1.9.3-p448äº†ã€‚å›é¡¾è¿™æ•´ä¸ªè¿‡ç¨‹ï¼Œéƒ½æ˜¯æ³ªå•Šã€‚æœ¬æ¥æ˜¯æƒ³è£…ä¸ªè™šæ‹Ÿæœºç©ç©ï¼Œå“ªæƒ³åˆ°æƒ¹å‡ºè¿™ä¹ˆå¤šäº‹æƒ…æ¥ã€‚ä¸è¿‡å¥½æ­¹é—®é¢˜æ˜¯è§£å†³äº†ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Haskellå‡½æ•°å¼ç¼–ç¨‹ä¹‹ç‰¹æ€§ç¯‡]]></title>
    <link href="http://www.huangbowen.net/blog/2013/03/17/haskell-functional-programming-feature/"/>
    <updated>2013-03-17T12:46:00+08:00</updated>
    <id>http://www.huangbowen.net/blog/2013/03/17/haskell-functional-programming-feature</id>
    <content type="html"><![CDATA[<p>å‡½æ•°å¼ç¼–ç¨‹çš„å®šä¹‰æ˜¯ï¼š</p>

<p>In computer science, functional programming is a programming paradigm that treats computation as the evaluation of mathematical functions and avoids stateand mutable data.
å³ï¼šå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œä»–å°†è®¡ç®—æœºè¿ç®—çœ‹åšæ˜¯æ•°å­¦ä¸­å‡½æ•°çš„è®¡ç®—ï¼Œå¹¶ä¸”é¿å…äº†å¼•å…¥çŠ¶æ€åŠå¯å˜æ•°æ®ã€‚</p>

<p>å®ƒæ›´å¼ºè°ƒå‡½æ•°çš„åº”ç”¨ï¼Œè€Œä¸åƒå‘½ä»¤å¼ç¼–ç¨‹æ›´å¼ºè°ƒçŠ¶æ€çš„æ”¹å˜ã€‚</p>

<h2>æ— å‰¯ä½œç”¨ï¼ˆside effectï¼‰</h2>

<p>å‘½ä»¤å¼å‡½æ•°å¯èƒ½ä¼šæ”¹å˜ç¨‹åºçš„çŠ¶æ€ï¼Œè¿™å°±ä¼šå¯¹å…¶äº§ç”Ÿ<strong>å‰¯ä½œç”¨</strong>ã€‚åœ¨å‘½ä»¤å¼ç¼–ç¨‹ä¸­ï¼Œåœ¨æ‰§è¡Œç¨‹åºä¸åŒçš„çŠ¶æ€ä¸‹åŒä¸€ä¸ªå‡½æ•°çš„è¿”å›ç»“æœä¼šå‘ç”Ÿæ”¹å˜ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨JavaScriptå†™çš„å‡½æ•°ã€‚</p>

<p>```javascript</p>

<p>var state = true;
var getVal = function () [</p>

<pre><code> return state;
</code></pre>

<p>}</p>

<p><code>
</code>javascript</p>

<p>console.log(getVal()); //true
state = false;
console.log(getVal()); // false</p>

<p>```</p>

<!-- more -->


<p>æ³¨æ„æˆ‘ä»¬è°ƒç”¨äº†ä¸¤æ¬¡getVal(),ä½†æ˜¯å…¶è¾“å‡ºäº†ä¸åŒçš„ç»“æœã€‚è€Œåœ¨Haskellä¸­ï¼Œå¯¹å˜é‡åªæœ‰å£°æ˜ï¼Œæ²¡æœ‰èµ‹å€¼ã€‚å³å¦‚æœå£°æ˜äº†ä¸€ä¸ªå€¼ä¸ºtrueçš„stateå˜é‡ï¼Œå°±æ— æ³•å†å°†å…¶ä¿®æ”¹ä¸ºfalseã€‚è¿™å«åš<strong>å˜é‡çš„ä¸å˜æ€§</strong>ã€‚</p>

<p>è€Œå‡½æ•°å¼ç¼–ç¨‹ä¸­å¦‚æœæè¿°çŠ¶æ€çš„å˜åŒ–é‚£ï¼Œå°±æ˜¯å°†çŠ¶æ€å˜åŒ–ä½œä¸ºå‡½æ•°çš„å‚æ•°è¿›è¡Œä¼ é€’ã€‚</p>

<h2>å»¶è¿Ÿè®¡ç®—ï¼ˆlazy evaluationï¼‰</h2>

<p>æ­£å› ä¸ºå‡½æ•°å¼ç¼–ç¨‹æ— å‰¯ä½œç”¨ï¼Œæ‰€ä»¥<strong>å»¶è¿Ÿè®¡ç®—</strong>ï¼ˆåˆç§°ä¸ºæƒ°æ€§æ±‚å€¼ï¼‰å°±æˆä¸ºå¯èƒ½ã€‚
<strong>å»¶è¿Ÿè®¡ç®—</strong>æŒ‡å°†ä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼æ¨è¿Ÿåˆ°ç›´åˆ°è¢«éœ€è¦æ—¶æ‰è¿›è¡Œè®¡ç®—ã€‚ï¼ˆdelays the evaluation of an expression until its value is needed ï¼‰</p>

<p>å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼š</p>

<ul>
<li>é¿å…äº†ä¸éœ€è¦çš„è¿ç®—ï¼Œä»è€Œæé«˜çš„æ€§èƒ½ã€‚</li>
<li>ä½¿åˆ›å»ºæ— é™çš„æ•°æ®ç»“æ„æˆä¸ºå¯èƒ½ã€‚</li>
</ul>


<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªå°†æŒ‡å®šå‚æ•°æ”¾ç½®åˆ°ä¸€ä¸ªæ— é™é•¿çš„æ•°ç»„ä¸­çš„å‡½æ•°ã€‚</p>

<p>```haskell</p>

<p>repeat' :: a -> [a]
repeat' x = x : repeat' x</p>

<p>```</p>

<p>ç¬¬ä¸€è¡Œæ˜¯å¯¹repeat'å‚æ•°åŠè¿”å›å€¼çš„å®šä¹‰ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªç±»å‹a,è¿”å›açš„æ•°ç»„ã€‚
ç¬¬äºŒè¡Œæ˜¯repeat'å‡½æ•°çš„å®ç°ï¼Œå®ƒå°†xæ”¾ç½®åˆ°ä¸€ä¸ªæ— ç©·å¤§çš„æ•°ç»„ä¸­ã€‚</p>

<p>åœ¨æ²¡æœ‰å»¶è¿Ÿè®¡ç®—ç‰¹æ€§çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè¿™ç§å‡½æ•°æ˜¯æ ¹æœ¬æ— æ³•ä½¿ç”¨çš„ã€‚å› ä¸ºä¸€æ—¦è°ƒç”¨å°±ä¼šé™·å…¥æ­»å¾ªç¯ã€‚
å³ä½¿åœ¨æ”¯æŒå»¶è¿Ÿè®¡ç®—çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è¾“å‡ºè¿™ä¸ªæ•°ç»„:<code>print $ repeat' 10</code>,ä¹Ÿä¼šè¿›å…¥æ­»å¾ªç¯ã€‚é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨å®ƒé‚£ï¼Ÿæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªtakeå‡½æ•°ï¼Œå…¶å¯ä»¥è¿”å›æ•°ç»„ä¸­å‰å‡ ä½å…ƒç´ ã€‚</p>

<p>```haskell
take' :: Int -> [a] -> [a]
take' 1 (x:xs) = [x]
take' index (x:xs) = x : (take' (index-1) xs)</p>

<p>```
æˆ‘ä»¬è¿™æ ·è°ƒç”¨å®ƒï¼Œ</p>

<p>```bash</p>

<p>Prelude> take' 3 (repeat' 5)
[5,5,5]
Prelude> take' 3 (repeat' 'a')
"aaa"</p>

<p>```</p>

<p>Haskellå¯¹å‡½æ•°å‚æ•°é»˜è®¤é‡‡å–å»¶è¿Ÿè®¡ç®—çš„æ±‚å€¼ç­–ç•¥ã€‚æ‰€ä»¥è¿™æ ·åœ¨è°ƒç”¨repeat'å‡½æ•°æ—¶å¹¶ä¸æ˜¯å…ˆå°†repeat'å‡½æ•°çš„ç»“æœæ•°ç»„è®¡ç®—å‡ºæ¥ï¼Œå†è¿›è¡Œtakeæ“ä½œï¼Œè€Œæ˜¯takeæ“ä½œéœ€è¦å‰å‡ ä½å…ƒç´ ï¼Œrepeat'å‡½æ•°æ‰ä¼šç”Ÿæˆå‰å‡ ä½å…ƒç´ ã€‚</p>

<h2>é«˜é˜¶å‡½æ•°(Higher-order function)</h2>

<p>ä¸€ä¸ªå‡½æ•°æˆä¸º<strong>é«˜é˜¶å‡½æ•°</strong>éœ€è¦æ»¡è¶³ä¸‹é¢ä¸¤æ¡ä¸­çš„è‡³å°‘ä¸€æ¡:</p>

<ol>
<li>å°†ä¸€ä¸ªæˆ–å¤šä¸ªå‡½æ•°ä½œä¸ºè¾“å…¥ã€‚</li>
<li>è¾“å‡ºæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</li>
</ol>


<p>æ¢å¥è¯è¯´ï¼Œ<strong>é«˜é˜¶å‡½æ•°å°±æ˜¯å°†å‡½æ•°ä½œä¸ºå‚æ•°æˆ–è€…ä½œä¸ºè¿”å›å€¼çš„å‡½æ•°</strong>ã€‚å…¶ä»–å‡½æ•°éƒ½æˆ<strong>ä¸ºä¸€é˜¶å‡½æ•°</strong>(first order function)ã€‚å…¶å®è¿™ä¸ªæ¦‚å¿µæœ€æ—©æ¥æºäºæ•°å­¦é¢†åŸŸã€‚</p>

<p>å‡½æ•°æ˜¯Haskellä¸–ç•Œä¸­çš„ä¸€ç­‰å…¬æ°‘ï¼Œæ‰€ä»¥è‚¯å®šæ”¯æŒé«˜é˜¶å‡½æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼ŒHaskellä¸­æœ‰ä¸ªmapå‡½æ•°ï¼Œå®ƒçš„å®šä¹‰æ˜¯è¿™æ ·çš„:
map:: (a -> b) -> [a] -> [b]
å®ƒçš„ä½œç”¨æ˜¯ä¼ å…¥ä¸€ä¸ªå‡½æ•°åŠä¸€ä¸ªæ•°ç»„ï¼Œå¯¹è¯¥æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ åº”ç”¨æ­¤å‡½æ•°ï¼Œä»è€Œè½¬æ¢ä¸ºå¦ä¸€ä¸ªæ•°ç»„ã€‚
æˆ‘ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªmapå‡½æ•°ã€‚</p>

<p>```haskell</p>

<p>map' :: (a -> b) -> [a] -> [b]
map' f [] = []
map' f (x:xs) =f x : map' f xs</p>

<p>```</p>

<p>map'å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¾“å…¥å€¼ä¸ºaç±»å‹çš„å€¼ï¼Œè¾“å‡ºå€¼ä¸ºbç±»å‹çš„å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºæºæ•°ç»„ã€‚
æˆ‘ä»¬è°ƒç”¨ma p'å‡½æ•°æ—¶ï¼Œå¯ä»¥ç›´æ¥å†™ä¸€ä¸ªlambdaè¡¨è¾¾å¼ï¼Œå¯¹æºæ•°ç»„è¿›è¡Œå„ç§æ“ä½œã€‚</p>

<p>```bash</p>

<p>Prelude> map' (\x -> x + 5)  [1,2,3]
[6,7,8]
Prelude> map' (\x -> x * x)  [1,2,3]
[1,4,9]</p>

<p>```</p>

<p>å¦‚æœæˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬æƒ³é€šè¿‡map'å‡½æ•°å¯¹æ•°ç»„çš„æ¯ä¸ªå¯¹è±¡éƒ½åŠ ä¸Šä¸€ä¸ªå€¼nï¼Œè¿™ä¸ªnæˆ‘ä¸æƒ³ç›´æ¥å®šä¹‰åœ¨æ­¤lambdaè¡¨è¾¾å¼ä¸­ï¼Œèƒ½å®ç°å—ï¼Ÿç­”æ¡ˆæ˜¯å¯ä»¥ã€‚</p>

<p>```haskell</p>

<p>outer = let n = 5 in map' (\x -> x + n) [1,2,3]
[6,7,8]</p>

<p>```</p>

<p>å¯¹äºåŒ¿åå‡½æ•°(\x -> x + n)æ¥è¯´ï¼Œnå°±æ˜¯<strong>non-local variable</strong>ã€‚ä»€ä¹ˆæ˜¯<strong>non-local variable</strong>é‚£ï¼Ÿå¦‚æœä¸€ä¸ªå‡½æ•°ä½¿ç”¨äº†ä¸€ä¸ªå˜é‡ï¼Œè¿™ä¸ªå˜é‡æ—¢ä¸å±äºå…¨å±€å˜é‡ï¼Œä¹Ÿä¸å±äºåœ¨æ­¤å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡ï¼Œé‚£è¿™ä¸ªå˜é‡å¯¹äºæ­¤å‡½æ•°æ¥è¯´å°±æ˜¯<strong>non-local variable</strong>ã€‚
æ‰€è°“çš„é—­åŒ…å°±æ˜¯ä½¿ç”¨äº†non-local variableçš„å‡½æ•°ã€‚</p>

<h2>curry function</h2>

<p>curry functionè¿˜çœŸæ¯”è¾ƒéš¾ç¿»è¯‘ï¼Œå…ˆçœ‹çœ‹<a href="http://en.wikipedia.org/wiki/Currying">wiki</a>ç™¾ç§‘çš„ç¿»è¯‘ï¼š</p>

<p>In mathematics and computer science, currying is the technique of transforming a function that takes multiple arguments (or a tuple of arguments) in such a way that it can be called as a chain of functions, each with a single argument (partial application).</p>

<p><strong>åœ¨æ•°å­¦é¢†åŸŸå’Œè®¡ç®—æœºç§‘å­¦é¢†åŸŸï¼Œcurryingæ˜¯ä¸€é¡¹å°†æ¥æ”¶å¤šä¸ªå‚æ•°ï¼ˆæˆ–å‚æ•°å…ƒç»„ï¼‰å‡½æ•°è½¬æ¢ä¸ºå‡½æ•°çš„é“¾å¼è°ƒç”¨çš„æŠ€æœ¯ï¼Œé“¾æ¡ä¸­çš„æ¯ä¸ªå‡½æ•°æ¥æ”¶å•ä¸ªå‚æ•°ã€‚</strong></p>

<p>è¿™å¥è¯çœ‹èµ·æ¥çœŸè´¹è§£ã€‚é‚£ä¹ˆæˆ‘ç”¨ä¸€ä¸ªä¾‹å­è¯´æ˜ä¸€ä¸ªã€‚</p>

<p>å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªå‡½æ•°ä¸º<code>f(x,y) = x/y</code>ã€‚é‚£ä¹ˆ<code>f(2,3)</code>çš„æ‰§è¡Œè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„é‚£ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬å°†xæ›¿æ¢ä¸º2.é‚£ä¹ˆå¾—åˆ°äº†<code>f(2,y) = 2/y</code>ã€‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ–°çš„å‡½æ•°<code>g(y)= f(2,y) = 2/y</code>ã€‚å†å°†yæ›¿æ¢æˆ3ï¼Œé‚£ä¹ˆå¾—åˆ°äº†<code>g(3) = f(2,3) = 2/3</code>ã€‚è¿™ä¸ª<code>g(y)</code>å‡½æ•°å°±æ˜¯<code>f(x,y)</code>çš„ä¸€ä¸ªcurried function.</p>

<p>ä¸¾ä¸ªä¾‹å­ã€‚ä¸Šæ–‡ä¸­æˆ‘ä»¬æ„é€ äº†ä¸€ä¸ªmap'å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‡½æ•°åŠä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªåä¸ºdoubleMeçš„å‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œå°†æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ éƒ½ç¿»ä¸€å€ã€‚è¿™ä¸ªå¯ä»¥è¿™æ ·å†™:</p>

<p>```haskell</p>

<p>doubleMe = map' (\x -> x * x)</p>

<p>```</p>

<p>æ³¨æ„çœ‹ï¼Œå®šä¹‰doubleMeæ—¶æˆ‘ä»¬ä½¿ç”¨äº†map'å‡½æ•°ï¼Œä½†æ˜¯ç»™map'å‡½æ•°åªä¼ é€’äº†ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æ²¡æœ‰æä¾›ç¬¬äºŒä¸ªå‚æ•°ã€‚æ‰€ä»¥åœ¨è°ƒç”¨doubleMeæ—¶ï¼Œè¦ç»™å…¶ä¼ é€’ä¸€ä¸ªæ•°ç»„ã€‚</p>

<p>```bash</p>

<p>Prelude> doubleMe [1,2,3]
[1,4,9]</p>

<p>```
doubleMeçš„å‡½æ•°å®Œå…¨ç­‰ä»·äº:</p>

<p>```haskell</p>

<p>doubleMe ary = map' (\x-> x * x) ary</p>

<p>```
æ¢å¥è¯è¯´ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æ¥æ”¶å¤šä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæ¥æ”¶éƒ¨åˆ†å‚æ•°çš„è¯¥å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Haskellå‡½æ•°å¼ç¼–ç¨‹ä¹‹é€’å½’]]></title>
    <link href="http://www.huangbowen.net/blog/2013/03/14/haskell-recursion/"/>
    <updated>2013-03-14T21:46:00+08:00</updated>
    <id>http://www.huangbowen.net/blog/2013/03/14/haskell-recursion</id>
    <content type="html"><![CDATA[<p>åœ¨Haskellçš„ä¸–ç•Œä¸­ï¼Œæ²¡æœ‰å˜é‡èµ‹å€¼ï¼Œæµç¨‹è·³è½¬ï¼Œå¦‚æœè¦å®ç°ä¸€äº›ç®€å•çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æ±‚ä¸€ä¸ªæ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œéƒ½éœ€è¦å€ŸåŠ©é€’å½’å®ç°ã€‚</p>

<p><strong>é€’å½’å‡½æ•°çš„å®šä¹‰:</strong></p>

<p><strong>A function may be partly defined in terms of itself.</strong>
<strong>å³å¦‚æœä¸€ä¸ªå‡½æ•°çš„å®šä¹‰ä¸­ä½¿ç”¨äº†å…¶è‡ªèº«ï¼Œè¿™ä¸ªå‡½æ•°å°±å«åšé€’å½’å‡½æ•°ã€‚</strong></p>

<h2>æ™®é€šé€’å½’(traditional recursion)</h2>

<p>æˆ‘ä»¬å°±å†™ä¸€ä¸ªç®€å•çš„å¯¹æ•°ç»„æ±‚å’Œçš„å‡½æ•°ã€‚</p>

<p>```haskell</p>

<p>sum' :: (Num a) => [a] -> a
sum' (x:xs) = x + sum' xs
sum' [] = 0</p>

<p>```</p>

<!-- more -->


<p>ç¬¬ä¸€è¡Œå®šä¹‰äº†äº†ä¸€ä¸ªåä¸º<code>sum'</code>çš„å‡½æ•°çš„å‚æ•°åŠè¿”å›å€¼ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªç±»å‹ä¸ºNumçš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªNumå‹çš„æ•°å€¼ã€‚ï¼ˆè¿™é‡Œçš„<code>'</code>æ˜¯å‡½æ•°åçš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºHaskellå…è®¸<code>'</code>ä½œä¸ºå‡½æ•°åçš„ä¸€éƒ¨åˆ†ã€‚ç”±äºç³»ç»Ÿå·²ç»æœ‰äº†sumå‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åŠ ä¸ª<code>'</code>ä¸æ ‡å‡†sumå‡½æ•°åŒºåˆ†å¼€ã€‚ï¼‰</p>

<p>ç¬¬äºŒè¡Œçš„(x:xs)å°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„æ•°ç»„å‚æ•°ã€‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†Haskellçš„pattern matchingã€‚xè¡¨ç¤ºçš„æ˜¯æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œxsè¡¨ç¤ºæ•°ç»„ä¸­çš„å…¶å®ƒå…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥æè¿°æ±‚æ•°ç»„ä¸­å€¼çš„å’Œçš„è¡Œä¸ºä¸ºï¼šæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸æ•°ç»„ä¸­å‰©ä½™å…ƒç´ çš„å’Œã€‚æ‰€ä»¥è¿™å°±æ˜¯æˆ‘ä»¬çš„å®ç°ã€‚</p>

<p>ç¬¬ä¸‰è¡Œåˆ™è¯´æ˜äº†å¦‚æœç»™ä¸€ä¸ªç©ºçš„æ•°ç»„åˆ™ç›´æ¥è¿”å›0ã€‚è¿™ä¹Ÿå«åšé€’å½’çš„é€€å‡ºæ¡ä»¶ï¼Œå¦åˆ™é€’å½’ä¼šæ²¡å®Œæ²¡äº†ã€‚</p>

<p>ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡Œå…±åŒå®Œæˆäº†è¿™ä¸ª<code>sum'</code>å‡½æ•°çš„å®šä¹‰ã€‚å½“ä½ ä¼ é€’ç»™å®ƒä¸€ä¸ªå‚æ•°æ—¶ï¼Œå®ƒä¼šæ ¹æ®å‚æ•°çš„æƒ…å†µè‡ªåŠ¨é€‰æ‹©è°ƒç”¨é‚£ä¸ªå®ç°ã€‚</p>

<p>å‡è®¾æˆ‘ä»¬è¿™æ ·è°ƒç”¨å®ƒï¼š<code>sum'  [1,2,3]</code>,ç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹æ˜¯è¿™æ ·å­çš„ï¼š</p>

<p>```console</p>

<p>sum' [1,2,3] -></p>

<p>1 + sum' [2,3] -></p>

<p>1 + (2 + sum' [3]) -></p>

<p>1 + (2 + (3 + sum' [])) -></p>

<p>1 + (2 + (3 + 0)) -></p>

<p>1 + (2 + 3) -></p>

<p>1 + 5 -></p>

<p>6</p>

<p>```</p>

<p>è¿™ç§é€’å½’æœ‰ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬ä¸€ç›´åˆ°ç­‰åˆ°é€’å½’ç»“æŸæ‰è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œè¿™æ ·åœ¨æ‰§è¡Œè¿‡ç¨‹æ—¢è¦ä¿å­˜å‡½æ•°è°ƒç”¨çš„å †æ ˆï¼Œè¿˜è¦ä¿å­˜ä¸­é—´è®¡ç®—ç»“æœçš„å †æ ˆï¼Œå¦‚æœé€’å½’è¿‡æ·±ï¼Œå¾ˆå®¹æ˜“å¼•èµ·stackOverFlow.</p>

<h2><strong>å°¾é€’å½’</strong>(tail recursion)</h2>

<p>é’ˆå¯¹ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ç§å†™æ³•ã€‚</p>

<p>```haskell</p>

<p>sum' :: (Num a) => [a] -> a -> a</p>

<p>sum' (x:xs) temp = sum' xs x+ temp</p>

<p>sum' [] temp = temp</p>

<p>```</p>

<p>æˆ‘ä»¬è¿™æ ·è°ƒç”¨å®ƒ: <code>sum' [1,2,3] 0</code>ã€‚</p>

<p>å®ƒçš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„:</p>

<p>```console</p>

<p>sum' [1,2,3] 0 -></p>

<p>sum' [2,3] 1 -></p>

<p>sum' [3] 3 -></p>

<p>sum' []  6 -></p>

<p>6</p>

<p>```</p>

<p>ç¬¬äºŒç§å†™æ³•å…¶å®å°±æ˜¯å°¾é€’å½’ã€‚</p>

<p><strong>å°¾é€’å½’çš„å®šä¹‰ï¼š</strong></p>

<p><strong>A recursive function is tail recursive if the final result of the recursive call is the final result of the function itself.</strong></p>

<p><strong>å³:å¦‚æœä¸€ä¸ªé€’å½’å‡½æ•°ï¼Œå®ƒçš„æœ€ç»ˆçš„é€’å½’è°ƒç”¨ç»“æœå°±æ˜¯è¿™ä¸ªå‡½æ•°çš„æœ€ç»ˆç»“æœï¼Œé‚£å®ƒå°±æ˜¯å°¾é€’å½’çš„ã€‚</strong></p>

<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ˜æ˜¾çœ‹å‡ºï¼Œç¬¬ä¸€ä¸ªä¸æ˜¯å°¾é€’å½’ï¼Œç¬¬äºŒä¸ªæ˜¯ã€‚</p>

<h3>å°¾é€’å½’ä¼˜åŒ–(tail recursion optimization)</h3>

<p>åœ¨å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œè°ƒç”¨å‡½æ•°éœ€è¦æ¶ˆè´¹å †æ ˆç©ºé—´ï¼Œä¸€ä¸ªå®ç°äº†å°¾é€’å½’çš„é€’å½’å‡½æ•°åœ¨è¿›è¡Œé€’å½’è°ƒç”¨æ—¶ï¼Œå…¶å®åªå…³å¿ƒé€’å½’è°ƒç”¨çš„ç»“æœï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨ä¸‹å±‚å‡½æ•°æ—¶ï¼Œå¯ä»¥èˆå»ä¸Šå±‚å‡½æ•°çš„å †æ ˆè°ƒç”¨æƒ…å†µï¼Œä¸‹å±‚é€’å½’è°ƒç”¨å¯ä»¥é‡ç”¨è¿™ä¸ªå †æ ˆç©ºé—´ï¼Œè¿™ç§å°±å«åš<strong>å°¾é€’å½’ä¼˜åŒ–</strong>ã€‚ä¸€ä¸ªå¯èƒ½çš„å®ç°æ–¹å¼æ˜¯ï¼šåªéœ€è¦æŠŠæ±‡ç¼–ä»£ç callæ”¹æˆjmp, å¹¶æ”¾å¼ƒæ‰€æœ‰ å±€éƒ¨å˜é‡å‹æ ˆå¤„ç†ï¼Œå°±å¯ä»¥äº†ã€‚</p>

<p>å°½ç®¡å°¾é€’å½’æ¯”é€’å½’æ›´èŠ‚çœå †æ ˆç©ºé—´ï¼Œä½†å¹¶éæ‰€æœ‰çš„é€’å½’ç®—æ³•éƒ½å¯ä»¥è½¬æˆå°¾é€’å½’çš„ï¼Œå› ä¸ºå°¾é€’å½’æœ¬è´¨ä¸Šæ‰§è¡Œçš„æ˜¯è¿­ä»£çš„è®¡ç®—è¿‡ç¨‹ã€‚è¿™ä¸å¹¶éæ‰€æœ‰çš„é€’å½’ç®—æ³•éƒ½å¯ä»¥è½¬æˆè¿­ä»£ç®—æ³•çš„åŸå› æ˜¯ä¸€æ ·çš„ã€‚</p>

<h2>äº’é€’å½’(mutual recursion)</h2>

<p>äº’é€’å½’å°±æ˜¯å¤šä¸ªé€’å½’å‡½æ•°ä¹‹é—´ç›¸äº’è°ƒç”¨ã€‚äº’é€’å½’çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªè‡ªç„¶æ•°æ˜¯å¶æ•°è¿˜æ˜¯è¿˜æ˜¯å¥‡æ•°ã€‚</p>

<p>```haskell</p>

<p>isOdd :: Int -> Bool
isOdd x
 | x == 0 = False
 | otherwise = isEven (x-1)</p>

<p>isEven :: Int -> Bool
isEven x
 | x == 0 = True
 | otherwise = isOdd (x-1)</p>

<p>```
è¿™ä¸ªå®ç°å¾ˆæœ‰æ„æ€ã€‚</p>

<p>ä»»ä½•ä¸€ä¸ªäº’é€’å½’éƒ½å¯ä»¥è¢«è½¬å˜ä¸º<strong>ç›´æ¥é€’å½’</strong>(direct recursion)ï¼Œå³å°†å¦ä¸€ä¸ªè°ƒç”¨inlineåˆ°å½“å‰é€’å½’å‡½æ•°ä¸­ã€‚</p>

<p>ä¸‹é¢æ˜¯isOddå’ŒisEvençš„<strong>ç›´æ¥é€’å½’</strong>ç‰ˆæœ¬ã€‚</p>

<p>```haskell</p>

<p>isOdd :: Int -> Bool
isOdd x
 | x == 0 = False
 | x == 1 = True
 | otherwise = isOdd (x-2)</p>

<p>isEven :: Int -> Bool
isEven x
 | x == 0 = True
 | x == 1 = False
 | otherwise = isEven (x-2)</p>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[JavaåŸºç¡€å­¦ä¹ ä¹‹Enum]]></title>
    <link href="http://www.huangbowen.net/blog/2013/03/12/enum-in-java/"/>
    <updated>2013-03-12T22:17:00+08:00</updated>
    <id>http://www.huangbowen.net/blog/2013/03/12/enum-in-java</id>
    <content type="html"><![CDATA[<p>Enumæ˜¯åœ¨Javaä¸­ç”¨æ¥å®šä¹‰æšä¸¾ç±»å‹çš„å…³é”®å­—ã€‚Enumä¸€èˆ¬ç”¨æ¥è¡¨ç¤ºä¸€ç»„ç›¸åŒç±»å‹çš„å¸¸é‡,å¦‚æ€§åˆ«ã€æ—¥æœŸ ã€é¢œè‰²ç­‰.</p>

<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„æšä¸¾ã€‚</p>

<p>```java
public enum Color
{</p>

<p>RED,</p>

<p>GREEN,</p>

<p>BLUE</p>

<p>}
```</p>

<!-- more -->


<p>å®é™…ä¸Šåœ¨Javaä¸­æšä¸¾ç±»å‹æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªç±»ï¼Œå…¶ç»§æ‰¿è‡ªjava.lang.Enumç±»ã€‚</p>

<p>é€šè¿‡é»˜è®¤æä¾›çš„<code>GetValues()</code>æ–¹æ³•å¯ä»¥è·å–æ‰€æœ‰æšä¸¾å¯¹è±¡ï¼Œå…¶ä»¥ä¸€ä¸ªæ•°ç»„çš„å½¢å¼è¿”å›ã€‚</p>

<p>```java</p>

<p>for(Color color : Color.values())
{</p>

<p>System.out.printf("%s: %s%n",color,color.toString());</p>

<p>}</p>

<p>```</p>

<p>è¾“å‡ºç»“æœä¸ºï¼š</p>

<p>```console</p>

<p>RED: RED</p>

<p>GREEN: GREEN</p>

<p>BLUE: BLUE</p>

<p>```</p>

<p>æ—¢ç„¶æ˜¯enumæœ¬è´¨ä¸Šæ˜¯ç±»ï¼Œé‚£ä¹ˆæˆ‘ä»¬å½“ç„¶å¯ä»¥ç»™å…¶åŠ ä¸€äº›æ–¹æ³•ã€‚æ³¨æ„æœ€åä¸€ä¸ªæšä¸¾å¯¹è±¡è¦ä½¿ç”¨â€œï¼›â€ç»“å°¾ï¼Œè¯´æ˜æšä¸¾å€¼ç»“æŸä½¿ç”¨ã€‚</p>

<p>```java</p>

<p>public enum Color
{</p>

<p>RED("Red Color"),</p>

<p>GREEN("Green Color"),</p>

<p>BLUE("Blue Color");</p>

<p>private final String color;</p>

<p>private Color(String color) {</p>

<pre><code>this.color = color;
</code></pre>

<p>}</p>

<p>public String getColor() {</p>

<p>return color;</p>

<p>}</p>

<p>}</p>

<p>```</p>

<p>æ³¨æ„åœ¨enumä¸­æ˜¯ä¸èƒ½å£°æ˜publicçš„æ„é€ å‡½æ•°çš„ï¼Œè¿™æ ·æ˜¯ä¸ºäº†é¿å…ç›´æ¥å®ä¾‹åŒ–enumå¯¹è±¡ã€‚</p>

<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>getValues()</code>æ–¹æ³•è°ƒç”¨<code>getColor()</code>æ–¹æ³•ã€‚</p>

<p>```java</p>

<p>for(Color color : Color.values())
{</p>

<p>System.out.printf("%s: %s%n",color,color.getColor());</p>

<p>}</p>

<p>```</p>

<p>ä»¥ä¸‹æ˜¯è¾“å‡ºç»“æœï¼š</p>

<p>```console</p>

<p>RED: Red Color</p>

<p>GREEN: Green Color</p>

<p>BLUE: Blue Color</p>

<p>```</p>

<p>å¦‚æœå¤§å®¶è¿˜æ˜¯çœ‹ä¸å¤ªæ˜ç™½çš„è¯ï¼Œæˆ‘å¯ä»¥å±•ç¤ºä¸€ä¸ªç±»æ¥å¯¹ä¸ªå¯¹æ¯”ã€‚</p>

<p>```java</p>

<p>public final class Color extends java.lang.Enum{</p>

<pre><code>public static final Color RED;

public static final Color GREEN;

public static final Color  BLUE;

static {};

public java.lang.String getColor();

public static Color[] values();

public static Color valueOf(java.lang.String);
</code></pre>

<p>}</p>

<p>```</p>

<p>è¿™ä¸ªç±»çš„ä½œç”¨ç­‰åŒäºæˆ‘ä»¬çš„Coloræšä¸¾å¯¹è±¡ã€‚è€Œæ¯ä¸ªè¢«æšä¸¾çš„æˆå‘˜å…¶å®å°±æ˜¯å®šä¹‰çš„æšä¸¾ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ï¼Œå®ƒä»¬éƒ½è¢«é»˜è®¤ä¸ºfinalã€‚æ— æ³•æ”¹å˜å¸¸æ•°åç§°æ‰€è®¾å®šçš„å€¼ï¼Œå®ƒä»¬ä¹Ÿæ˜¯publicå’Œstaticçš„æˆå‘˜ï¼Œè¿™ä¸æ¥å£ä¸­çš„å¸¸é‡é™åˆ¶ç›¸åŒã€‚å¯ä»¥é€šè¿‡ç±»åç§°ç›´æ¥ä½¿ç”¨å®ƒä»¬ã€‚</p>

<p>æ‰€ä»¥æˆ‘ä»¬å¤§èƒ†çš„åœ¨é‡Œé¢å¢åŠ ä¸€äº›å…¶å®ƒçš„æ–¹æ³•æ¥å®ç°æˆ‘ä»¬çš„æ–°ç‰¹æ€§ã€‚</p>

<p>åœ¨è¿™é‡Œæˆ‘å¢åŠ äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•isRed()æ¥åˆ¤æ–­å½“å‰æšä¸¾å®ä¾‹æ˜¯å¦æ˜¯çº¢è‰²çš„ã€‚</p>

<p>```java</p>

<p>public enum Color
{</p>

<p>RED("Red Color"),</p>

<p>GREEN("Green Color"),</p>

<p>BLUE("Blue Color");</p>

<p>private final String color;</p>

<p>private Color(String color) {</p>

<pre><code>this.color = color;
</code></pre>

<p>}</p>

<p>public String getColor() {</p>

<p>return color;</p>

<p>}</p>

<p>public boolean isRed() {</p>

<p>return this.equals(RED);</p>

<p>}</p>

<p>}</p>

<p>```</p>

<p>å¯ä»¥å¯¹å…¶è¿›è¡Œä¸€ä¸ªæµ‹è¯•ã€‚</p>

<p>```java</p>

<p>Color green = Color.GREEN;</p>

<p>System.out.print(green.isRed());</p>

<p>Color red = Color.RED;</p>

<p>System.out.print(red.isRed());</p>

<p>```</p>

<p>ç¬¬ä¸€ä¸ªè¾“å‡ºç»“æœä¸ºfalseï¼Œç¬¬äºŒä¸ªè¾“å‡ºç»“æœä¸ºtrueã€‚</p>

<p>é€šè¿‡å¯¹Javaä¸­enumçš„è¿ç”¨ï¼Œå¾€å¾€ä¼šäº§ç”Ÿå¥‡æ•ˆã€‚æ¯”å¦‚æœ‰è¿™æ ·ä¸€ä¸ªä¾‹å­ï¼Œæœ‰ä¸€ä¸ªRoverå¯¹è±¡ï¼Œå®ƒæœ‰ä¸€ä¸ªç±»å‹ä¸ºEnumçš„directionå±æ€§ï¼Œæˆ‘ä»¬è¦ç»™Roverå®ç°å·¦è½¬çš„æŒ‡ä»¤ã€‚ä½ å¯èƒ½ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š</p>

<p>```java Direction.java</p>

<p>public enum Direction {</p>

<pre><code>North,
East,
South,
West
</code></pre>

<p>}</p>

<p><code>
</code>java Rover.java</p>

<p>public class Rover {</p>

<pre><code>private Direction direction;

public Rover(Direction direction) {
    this.direction = direction;
}

public void turnLeft() {
    if (direction.equals(Direction.East)) {
        direction = Direction.North;
    } else if (direction.equals(Direction.North)) {
        direction = Direction.West;
    } else if (direction.equals(Direction.West)) {
        direction = Direction.South;
    } else if (direction.equals(Direction.South)) {
        direction = Direction.East;
    }

}
</code></pre>

<p>}</p>

<p><code>``
ä¸€å¤§å †</code>if...else`çš„ä»£ç çœ‹èµ·æ¥çœŸçš„å¾ˆä¸‘é™‹ã€‚è¿™è¿˜å¥½ï¼Œå¦‚æœè®©ä½ ç»™Roverå†åŠ å‡ ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚å‘å³è½¬ï¼Œæ—‹è½¬åˆ°åæ–¹å‘ç­‰ï¼Œé‚£ä»£ç å°±æ²¡æ³•çœ‹äº†ã€‚
æˆ‘ä»¬å¯ä»¥è¿™æ ·åˆ†æä¸€ä¸‹ï¼Œå…¶å®ç»™å®šä¸€ä¸ªæ–¹å‘ä¹‹åï¼Œå‘å·¦è½¬çš„æ–¹å‘ä¹Ÿå°±ç¡®å®šäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¿™äº›é€»è¾‘æ”¾ç½®åˆ°Directionå¯¹è±¡ä¸­å»ã€‚ä¸‹é¢æ˜¯æ”¹è¿›åçš„ç‰ˆæœ¬ã€‚</p>

<p>```java Direction.java</p>

<p>public enum Direction {</p>

<pre><code>North {
    @Override
    public Direction turnLeft() {
    return West;
    }
},
East {
    @Override
    public Direction turnLeft() {
        return North;
    }

},
South {
    @Override
    public Direction turnLeft() {
        return East;
    }
},
West {
    @Override
    public Direction turnLeft() {
        return South;
    }
};

public abstract Direction turnLeft();
</code></pre>

<p>}</p>

<p>```</p>

<p>```java Rover.java</p>

<p>public class Rover {</p>

<pre><code>private Direction direction;

public Rover(Direction direction) {
    this.direction = direction;
}

public void turnLeft() {
    direction = direction.turnLeft();
}
</code></pre>

<p>}</p>

<p>```</p>

<p>è¿™æ ·çš„ä»£ç çœ‹èµ·æ¥è¦èˆ’æœçš„å¤š.</p>

<h2>C#ä¸­çš„Enum</h2>

<p>æˆ‘ä¹Ÿå¯ä»¥ç®€å•çš„è®²è§£ä¸‹c#ä¸­çš„æšä¸¾å¯¹è±¡ã€‚åœ¨c#ä¸­å£°æ˜æšä¸¾å¯¹è±¡çš„å…³é”®å­—æ˜¯enumã€‚</p>

<p>```c#</p>

<p> è®¿é—®ä¿®è¾ç¬¦ enum æšä¸¾å:åŸºç¡€ç±»å‹</p>

<pre><code>{
    æšä¸¾æˆå‘˜
}
</code></pre>

<p>```</p>

<p>åŸºç¡€ç±»å‹å¿…é¡»èƒ½å¤Ÿè¡¨ç¤ºè¯¥æšä¸¾ä¸­å®šä¹‰çš„æ‰€æœ‰æšä¸¾æ•°å€¼ã€‚æšä¸¾å£°æ˜å¯ä»¥æ˜¾å¼åœ°å£°æ˜ byteã€sbyteã€shortã€ushortã€intã€uintã€long æˆ– ulong ç±»å‹ä½œä¸ºå¯¹åº”çš„åŸºç¡€ç±»å‹ã€‚æ²¡æœ‰æ˜¾å¼åœ°å£°æ˜åŸºç¡€ç±»å‹çš„æšä¸¾å£°æ˜æ„å‘³ç€æ‰€å¯¹åº”çš„åŸºç¡€ç±»å‹æ˜¯ int.</p>

<p>```c#</p>

<p>public enum Color</p>

<p>{</p>

<p>RED,</p>

<p>GREEN,</p>

<p>BLUE</p>

<p>}</p>

<p>```</p>

<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å°†ä¸€ä¸ªæšä¸¾ç±»å‹å¼ºåˆ¶è½¬æ¢æˆå…¶å¯¹åº”çš„åŸºç¡€ç±»å‹ã€‚</p>

<p><code>c#
Int  num = (int)Color.Red;
</code></p>

<p>Numçš„å€¼ä¸º0.</p>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åå‘è½¬æ¢ã€‚</p>

<p>```c#</p>

<p>Color color = (Color)num;</p>

<p>```</p>

<p>ç”šè‡³æˆ‘ä»¬è¿˜å¯ä»¥å¯¹æšä¸¾ç±»å‹è¿›è¡Œä¸æˆ–è¿ç®—ã€‚è¿™äº›å°±ä¸ç»†è¯´äº†ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Haskell-å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ä¹‹åˆä½“éªŒ]]></title>
    <link href="http://www.huangbowen.net/blog/2013/03/02/haskell-programming-language-first-touch/"/>
    <updated>2013-03-02T14:55:00+08:00</updated>
    <id>http://www.huangbowen.net/blog/2013/03/02/haskell-programming-language-first-touch</id>
    <content type="html"><![CDATA[<p>å¦‚æœä½ æ˜¯ä½¿ç”¨é¢å‘å¯¹åƒè¯­è¨€è¿›è¡Œç¼–ç¨‹çš„ç¨‹åºå‘˜ï¼Œé‚£ä¹ˆä½ åº”è¯¥å»äº†è§£æŒæ¡ä¸€é—¨åŠ¨æ€è¯­è¨€ã€‚è€ŒåŠ¨æ€è¯­è¨€çš„é­”åŠ›ä¹‹ä¸€å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚è€Œè¦å­¦ä¹ äº†è§£å‡½æ•°å¼ç¼–ç¨‹ï¼Œé‚£ä¹ˆhaskellæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>

<p>Haskellæ˜¯æ˜¯ä¸€é—¨çº¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€(purely functional programming language)ã€‚åœ¨å…¶ä¸–ç•Œä¸­å‡½æ•°æ˜¯ç¬¬ä¸€ç­‰å¯¹è±¡ã€‚å¹¶ä¸”åœ¨haskellä¸­æ²¡æœ‰èµ‹å€¼ï¼Œä¾‹å¦‚ä½ æŒ‡æ´¾açš„å€¼ä¸º5ï¼Œç„¶åä½ æ— æ³•å†ç»™aåˆ†é…å…¶å®ƒçš„å€¼ã€‚æ‰€ä»¥ä½ ä¸èƒ½åƒå‘½ä»¤å¼è¯­è¨€é‚£æ ·å‘½ä»¤ç”µè„‘â€œè¦åšä»€ä¹ˆâ€ï¼Œè€Œæ˜¯é€šè¿‡å‡½æ•°æ¥æè¿°å‡ºé—®é¢˜â€œæ˜¯ä»€ä¹ˆâ€ã€‚</p>

<p>ä½œä¸ºä¸€ä¸ªçº¯çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒæ”¯æŒæƒ°æ€§æ±‚å€¼ã€æ¨¡å¼åŒ¹é…ã€åˆ—è¡¨è§£æã€ç±»å‹ç±»ã€ç±»å‹å¤šæ€â€¦â€¦</p>

<p>åˆ«ç€æ€¥ï¼Œè®©æˆ‘ä»¬æ…¢æ…¢æ¥è§£å¼€å‡½æ•°å¼ç¼–ç¨‹çš„é¢çº±ã€‚</p>

<!-- more -->


<h2>å®‰è£…Haskell</h2>

<ol>
<li><p>å¯ä»¥å»<a href="http://www.Haskell.org/Haskellwiki/Haskell">å®˜ç½‘</a>ä¸‹è½½å®‰è£…åŒ…è¿›è¡Œå®‰è£…ã€‚</p></li>
<li><p>macå¹³å°çš„ç”¨æˆ·å¯ä»¥é€šè¿‡<a href="http://mxcl.github.com/homebrew/">homebrew</a>è¿›è¡Œå®‰è£…ã€‚</p></li>
</ol>


<p>åœ¨terminalä¸‹è¾“å…¥<code>brew install haskell-platform</code>å³å¯ã€‚</p>

<h2>ä½¿ç”¨Haskell</h2>

<p>å®‰è£…å®Œæ¯•åhaskell platformçš„è§£é‡Šå™¨GHCå°±å·²ç»åœ¨ä½ çš„ç”µè„‘ä¸Šäº†ã€‚GHCå¯ä»¥è§£é‡Šæ‰§è¡ŒHaskellè„šæœ¬ï¼Œå³åç¼€åä¸º.hsçš„æ–‡ä»¶ã€‚ä½ å¯å¯ä»¥é€šè¿‡åœ¨terminalè¾“å…¥<code>ghci</code>è¿›å…¥äº¤äº’æ¨¡å¼ã€‚</p>

<p>``` bash</p>

<p>twer@bowen-huang:~$ ghci
GHCi, version 7.4.2: http://www.haskell.org/ghc/ :? for help
Loading package ghc-prim ... linking â€¦ done.
Loading package integer-gmp ... linking â€¦ done.
Loading package base ... linking â€¦ done.
Prelude> 1+2
3
Prelude> 3*4
12
Prelude> 5/1
5.0</p>

<p>```</p>

<p>å…³äºHaskellçš„ç¼–è¾‘å™¨ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•å–œæ¬¢çš„ç¼–è¾‘å™¨:Vimã€Emacsã€Sublimeã€TextMateâ€¦..æˆ‘æ¯”è¾ƒå–œæ¬¢Sublimeã€‚å› ä¸ºåœ¨Sublimeè‡ªå¸¦Haskellçš„å¿«æ·ç¼–è¯‘æ‰§è¡Œã€‚åªéœ€è¦æŒ‰Ctrl+Bæ¥ç›´æ¥è¿è¡ŒScriptsè„šæœ¬ã€‚</p>

<p>åœ¨ghciäº¤äº’æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨<code>:l</code>å‘½ä»¤æ¥loadä¸€ä¸ªHaskellè„šæœ¬ï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨æ­¤è„šæœ¬ä¸­çš„å‡½æ•°ã€‚æˆ‘ä»¬å…ˆå†™ä¸€ä¸ª'Hello world!â€™ç¨‹åºï¼Œç„¶åé€šè¿‡ghciæ¥loadå’Œè°ƒç”¨.</p>

<p>``` haskell HelloWorld.hs</p>

<p>main = print $ "Hello world!"</p>

<p>```</p>

<p>``` bash
Prelude> :l HelloWorld.hs
[1 of 1] Compiling Main ( HelloWorld.hs, interpreted )
Ok, modules loaded: Main.
*Main> main
"Hello world!"</p>

<p>```</p>

<p>å¦‚æœå¯¹æ–‡ä»¶è¿›è¡Œäº†ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡<code>:r</code>æ¥é‡æ–°åŠ è½½æ–‡ä»¶ã€‚</p>

<h2>Haskellçš„åŸºæœ¬è¯­æ³•</h2>

<h3>åŠ å‡ä¹˜é™¤æ“ä½œ</h3>

<p>``` bash</p>

<p>Prelude> 1 + 2
3
Prelude> 3 - 1
2
Prelude> 3 * 4
12
Prelude> 5 / 1
5.0
Prelude> 10 / (-5)
-2.0</p>

<p>```</p>

<p>æ³¨æ„å¯¹è´Ÿæ•°è¿›è¡Œæ“ä½œæ—¶è¦å°†å…¶ç”¨()æ‹¬èµ·æ¥ï¼Œå¦åˆ™ç³»ç»Ÿä¼šæŠ¥é”™ã€‚</p>

<h3>åˆ¤ç­‰ä¸æ¯”è¾ƒæ“ä½œ</h3>

<p>``` bash</p>

<p>Prelude> 5 == 5
True
Prelude> 10 == 8
False
Prelude> 5 /= 5
False
Prelude> 10 /= 8
True
Prelude> 5 >= 3
True
Prelude> 5 &lt;= 3
False
Prelude> True &amp;&amp; True
True
Prelude> True &amp;&amp; False
False
Prelude> False || False
False
Prelude> True || False
True
Prelude> not True
False
Prelude> not False
True</p>

<p>```</p>

<h3>æ§åˆ¶æµè½¬</h3>

<p>``` bash</p>

<p>Prelude> let isHello x = if x == "Hello" then True else False
Prelude> isHello "Hello"
True
Prelude> isHello "World"
False</p>

<p>```</p>

<p>æ³¨æ„è¿™é‡Œçš„æ¡ä»¶åˆ¤æ–­ä¸­çš„elseæ˜¯ä¸å¯ä»¥çœç•¥çš„ï¼Œè¿™æ ·ä¿è¯æ¡ä»¶è¯­å¥æ€»ä¼šè¿”å›ä¸€ä¸ªå€¼ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ª<code>if..then..else</code> patternçœ‹åšä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>

<p>å¦‚æœåœ¨è„šæœ¬æ–‡ä»¶ä¸­å†™çš„è¯ä¸éœ€è¦ä½¿ç”¨<code>let</code>å…³é”®å­—ã€‚å¹¶ä¸”ä¹Ÿå¯ä»¥é‡‡ç”¨å¦ä¸€ä¸ªå†™æ³•ã€‚</p>

<p>``` haskell isHello.hs</p>

<p>isHello x
 | x == "Hello" = True
 | otherwise     = False</p>

<p>```</p>

<p>|è¡¨ç¤ºæˆ–ï¼Œotherwiseå…³é”®å­—è¡¨ç¤ºå…¶å®ƒçš„æƒ…å†µã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å°†è¿™ä¸‰è¡Œä»£ç å†™æˆä¸€è¡Œï¼Œè¿™æ ·ä¹Ÿæ˜¯èƒ½å¤Ÿæ­£å¸¸è¿è¡Œçš„ã€‚åˆ†æˆä¸‰è¡Œåªæ˜¯ä¸ºäº†æ›´åŠ å¯è¯»ã€‚</p>

<p>è¿˜æœ‰ç¬¬ä¸‰ç§å†™æ³•ï¼Œå®é™…ä¸Šä¸é¢å¯¹å¯¹è±¡è¯­è¨€ä¸­çš„<code>switchâ€¦case</code>è¯­å¥æœ‰äº›ç±»ä¼¼ã€‚</p>

<p>``` haskell isHello.hs</p>

<p>isHello x = case x of
 "Hello" -> True
 otherwise -> False</p>

<p>```</p>

<p>è¿™å’Œç¬¬äºŒç§å†™æ³•å¾ˆç±»ä¼¼ã€‚å…¶å®ç¬¬äºŒç§å†™æ³•æœ¬è´¨ä¸Šå°±æ˜¯<code>case</code>è¯­å¥ï¼Œå®ƒåªæ˜¯<code>case</code>è¯­å¥çš„ä¸€ä¸ªè¯­æ³•ç³–è€Œå·²ã€‚</p>

<p>å¦å¤–ï¼Œåœ¨Haskellä¸­æ˜¯æ²¡æœ‰å„ç§å¾ªç¯è¯­å¥çš„ï¼Œå¦‚æœè¦å®ç°ç›¸ä¼¼çš„ç‰¹æ€§å½“ç„¶è¦ä½¿ç”¨é€’å½’äº†ã€‚</p>

<p>ç¬¬äºŒèŠ‚ä¸­ï¼Œæˆ‘ä»¬ä¼šè®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚</p>
]]></content>
  </entry>
  
</feed>
